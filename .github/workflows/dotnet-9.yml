name: .NET 9

on:
  push:
      branches:
        - main
        - feature/*
      tags:
        - "[0-9]+-[0-9]+-[0-9]+"
      paths:
        - ".github/workflows/dotnet-9.yml"
        - ".github/workflows/dotnet-lnx.yml"
        - "tests/9.0/**"
  pull_request:
      branches:
        - main

jobs:
  build-test-publish:
    strategy:
      matrix:
        architecture:
          - s390x
    name: "Build, Test, Publish (${{ matrix.architecture }})"
    permissions:
      contents: read
      packages: write
      id-token: write
    uses: ./.github/workflows/dotnet-lnx.yml
    with:
      version: "9.0.1"
      architecture: ${{ matrix.architecture }}
      docker_image: 'ghcr.io/gold-bull/dotnet-build-deps:ubuntu-20.04-latest'
